# Steam Price Tracker

Проект Steam Price Tracker представляет собой веб-приложение, разработанное с использованием фреймворка Django, для отслеживания цен на предметы приобретенные на торговой площадке Steam. Он предоставляет функциональность по добавлению, редактированию, архивированию и просмотру сделок по предметам, а также отображению истории изменения цен.


## Установка и настройка

Клонировать репозиторий и перейти в него в командной строке:
```
git clone git@github.com:AnatoliiBessmertnyi/steam_items.git
```
```
cd price-tracker
```

Установите зависимости:
```
pip install -r requirements.txt
```

Примените миграции:
```
python manage.py migrate
```

Запустите сервер:
```
python manage.py runserver
```

Посетите http://127.0.0.1:8000/ в вашем веб-браузере.


## Использование

- **Создание предмета:** Перейдите на главную страницу http://127.0.0.1:8000/. Нажмите "Добавить предмет" и введите необходимую информацию о предмете.
- **Добавление сделки:** В шапке странице выберите "Добавить сделку" и введите необходимую информацию о предмете.
- **Редактирование и архивирование сделки:** На главной странице перейдите в детали нужного предмета щелкнув по названия или иконке. Для редактирования предмета выберите "Редактировать" рядом с соответствующей предметом. Для архивации предмета выберите "Архивировать" рядом с соответствующим предметом.
- **Обновление цен:** На главной странице для нужного предмета можно обновить текущую цену, нажав "Обновить цену" или ввести ее вручную.
- **История цен:** На главной странице вы можете посмотреть график изменения цены предмета, выбрав "Текущая цена" напротив нужного нам предмета.
- **Удаление и восстановление сделок:** Сделки по предметам можно удалять и восстанавливать. Архивированные сделки не отображаются на главной странице. Удаленные сделки не подлежат восстановлению.
- **Обновление цен всех предметов:** Нажмите "Обновить цены" на главной странице для массового обновления цен всех предметов.


## Модели

- `Item`: Модель для представления предметов. Содержит название, ссылку, изображение, количество, общую стоимость, текущую цену, разницу в цене, время последней сделки и целевую цену.
- `ItemAddition`: Модель для представления добавления сделки с предметом. Содержит предмет, тип сделки, количество, цену за единицу предмета, комиссию, общую стоимость, время сделки и флаг архивации.
- `PriceHistory`: Модель для представления истории цен для каждого предмета. Содержит предмет, цену и временную метку создания записи.


## Обработчики сигналов

В проекте используется обработчик сигнала `post_save` для модели `ItemAddition`. Этот обработчик вызывается после сохранения экземпляра `ItemAddition` и обновляет поле `last_deal_time` в соответствующем экземпляре `Item` временем последней неархивированной сделки.

Если сделка архивирована, то время последней сделки у предмета обновляется до времени последней неархивированной сделки. Если все сделки с предметом архивированы, то `last_deal_time` устанавливается в `None`.

Если сделка не архивирована, то `last_deal_time` устанавливается во время этой сделки.


## Формы

- `ItemAdditionForm`: Форма для добавления сделки. Содержит выбор предмета, выбор типа сделки, количество, цену за единицу предмета, комиссию, дату и время сделки (опционально), и секунды времени сделки (опционально).
- `ItemForm`: Форма для создания нового предмета. Содержит название предмета, ссылку на предмет (опционально), и текстовое поле для изображения предмета (опционально).


## URL-маршруты

- Главная страница (`/`): Показывает список всех предметов по которым есть сделки.
- Страница деталей сделок по предмету (`item_detail/<int:pk>/`): Показывает детали сделок определенного предмета.
- Создание сделки (`create_deal/` и `create_deal/<int:item_id>/`): Позволяет добавить новую сделку.
- Обновление цены (`update_price/<int:item_id>/`): Позволяет обновить цену определенного предмета.
- Создание предмета (`create_item/`): Позволяет создать новый предмет.
- Редактирование сделки (`edit_deal/<int:pk>/`): Позволяет редактировать существующую сделку.
- Удаление сделки (`delete_deal/<int:pk>/`): Позволяет удалить существующую сделку.
- Архивация сделки (`archive_addition/<int:pk>/`): Позволяет архивировать существующую сделку.
- Просмотр архивированных сделок (`archived_additions/`): Показывает список всех архивированных сделок.
- Восстановление сделки (`unarchive_addition/<int:pk>/`): Позволяет восстановить архивированную сделку.
- Сохранение текущей цены (`save_current_price/`): Сохраняет текущую цену всех предметов.
- История цен (`price_history/<int:item_id>/`): Показывает историю цен определенного предмета.
- История цен (JSON) (`price_history_json/<int:item_id>/`): Возвращает историю цен определенного предмета в формате JSON.


## Представления

- `save_current_price`: Обработчик POST-запросов, сохраняющий текущую цену предмета.
- `IndexView`: Отображает список всех предметов.
- `UpdatePriceView`: Обновляет цену определенного предмета.
- `ItemDetailView`: Отображает детали определенного предмета.
- `AddItemView`: Позволяет добавить новую сделку.
- `EditAdditionView`: Позволяет редактировать существующую сделку.
- `CreateItemView`: Позволяет создать новый предмет.
- `DeleteAdditionView`: Позволяет удалить существующую сделку.
- `ArchiveAdditionView`: Позволяет архивировать существующую сделку.
- `ArchivedAdditionsView`: Показывает список всех архивированных сделок.
- `UnarchiveAdditionView`: Позволяет восстановить архивированную сделку.
- `PriceHistoryView`: Отображает историю цен определенного предмета.
- `PriceHistoryJsonView`: Возвращает историю цен определенного предмета в формате JSON.

Все представления реализованы с использованием классов Django View и Generic Views.


## Используемые технологии

- Python: Язык программирования.
- Django: Веб-фреймворк.
- Django Forms: Инструмент для создания форм.
- SQLite: СУБД.
- Requests: Библиотека Python для отправки HTTP-запросов.
- Steam API: Интерфейс программирования приложений для получения данных о предметах Steam.
- Chart.js: JavaScript-библиотека для визуализации данных.
- jQuery: JavaScript-библиотека для упрощения работы с HTML-документами.
- JavaScript: Язык программирования для создания интерактивных элементов на веб-страницах.
- HTML/CSS: Языки для создания и стилизации веб-страниц.


## Автор

[Anatolii Bessmertnyi](https://github.com/AnatoliiBessmertnyi)






